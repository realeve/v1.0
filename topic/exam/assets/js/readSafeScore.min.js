require.config({baseUrl:"assets/js",paths:{jquery:"jquery.min","jquery.fullPage":"jquery.fullPage.min",echarts:"echarts.min",waypoints:"waypoints.min","jquery.counterup":"jquery.counterup.min",fakeLoader:"fakeLoader.js/fakeLoader.min"},shim:{"jquery.fullPage":{deps:["jquery"]},"jquery.counterup":{deps:["jquery"]}}});var gb={loadComplete:!1,colors:{white:"#FFF",whiteMedium:"rgba(255, 255, 255, 0.6)",whiteMediumLight:"rgba(255, 255, 255, 0.3)",whiteLight:"rgba(255, 255, 255, 0.2)",whiteLighter:"rgba(255, 255, 255, 0.1)",primary:"#556fb5",primaryLight:"#889acb"},dbSheetIdx:53,option:[],optionRenderFlag:[],userInfo:{},dom:[],myChart:[],loadBscInfo:!1,color:["#61A5E8","#7ECF51","#EECB5F","#E4925D","#E16757","#9570E5","#605FF0","#85ca36","#1c9925","#0d8b5f","#0f9cd3","#2f7e9b","#2f677d","#9b7fed","#7453d6","#3b1d98","#27abb1","#017377","#015f63","#b86868","#5669b7","#e5aab4","#60b65f","#98d2b2","#c9c8bc","#45c3dc","#e17979","#5baa5a","#eaccc2","#ffaa74"]};require(["echarts","waypoints","jquery.counterup","jquery.fullPage"],function(e){function t(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=encodeURI(window.location.search).substr(1).match(t);return null!==o?decodeURI(o[2]):null}function o(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreOrder&score="+gb.userInfo.score,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.peopleNums=e.allPeople,gb.userInfo.scoreOrder=e.scoreOrder,gb.userInfo.scorePropt=1==e.scoreOrder?100:e.lessThan,$('[name="totals"]').text(gb.userInfo.peopleNums),$('[name="ltdOrder"]').text(gb.userInfo.scoreOrder),$('[name="scorePropt"]').text(gb.userInfo.scorePropt),$('[name="scoreProptDesc"]').text(Number.parseFloat(gb.userInfo.scorePropt)>50?"，想想是不是有点小激动呢？":"。"),a()})}function a(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreOrderByDpt&score="+gb.userInfo.score+"&dpt="+gb.userInfo.user_dpt,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dpt={},gb.userInfo.dpt.all=e.dpt_people,gb.userInfo.dpt.peopleNums=e.allPeople,gb.userInfo.dpt.scoreOrder=e.scoreOrder,gb.userInfo.dpt.scorePropt=1==e.scoreOrder?100:e.lessThan,$('[name="dptName"]').text(gb.userInfo.user_dpt),$('[name="dptCrewNum"]').text(gb.userInfo.dpt.all),$('[name="dptTotals"]').text(gb.userInfo.dpt.peopleNums),$('[name="dptOrder"]').text(gb.userInfo.dpt.scoreOrder),$('[name="dptScorePropt"]').text(gb.userInfo.dpt.scorePropt),n()})}function r(e,t){return userScore=10*Math.floor(Number.parseInt(gb.userInfo.score)/10),t.grid.x=35,t.yAxis=[{type:"category",show:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{textStyle:{color:"rgba(255, 255, 255, 0.6)"}},data:[]}],e.map(function(e,o){t.yAxis[0].data.push(e.score),userScore!=e.score?t.series[0].data.push(e.nums):t.series[0].data.push({value:e.nums,itemStyle:{normal:{color:"#95E570"}},label:{normal:{show:!0,formatter:"你的分数 "+gb.userInfo.score+" 分"}}})}),t}function n(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getTimeLength",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptTime=e.dptTime,gb.userInfo.ltdTime=e.ltdTime,$('[name="timeDesc1"]').text(Number.parseInt(gb.userInfo.timeUsed)<Number.parseInt(gb.userInfo.dptTime)?"低于":"高于"),$('[name="timeDesc2"]').text(Number.parseInt(gb.userInfo.timeUsed)<Number.parseInt(gb.userInfo.ltdTime)?"低于":"高于"),$('[name="dptTimeLength"]').text((Number.parseInt(gb.userInfo.dptTime)/60).toFixed(1)),$('[name="ltdTimeLength"]').text((Number.parseInt(gb.userInfo.ltdTime)/60).toFixed(1)),s()})}function s(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getAnsweredRatio",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare.answerRatio=e,$('[name="mostPeople"]').text(e[0].dpt),$('[name="answeredPrpt"]').text(e[0].answeredRatio),e[0].dpt!=gb.userInfo.user_dpt?$('[name="answerRatioDesc"]').text(",赶快邀请小伙伴们来参与活动吧。"):$('[name="answerRatioDesc"]').text("，告诉小伙伴们要继续努力哦。"),i()})}function i(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreCompare",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare.scoreCompare=e,$('[name="highestScore"]').text(e[0].dpt),$('[name="highestScorePrpt"]').text(e[0].score),d()})}function d(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getPrizeCompare",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare.prizeCompare=e,$('[name="prizePrpt"]').text(e[0].passRatio),c()})}function c(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/get2ndPassedRatio",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){$('[name="2ndTimesPrpt"]').text(e["2ndPassedRatio"]),$('[name="1stTime"]').text(e.moreChance),$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/get2ndPassedCompare",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.dptCompare.moreChancePassedCompare=e,p()})})}function p(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreRangeByDpt&dpt="+gb.userInfo.user_dpt,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){var t=e[e.length-1];$('[name="dptMostScore"]').text(t.score),$('[name="dptMostScoreNum"]').text(t.nums),$('[name="dptMostScoreDesc"]').text("他们对安全规章制度一定是熟记于心了，"),gb.userInfo.dptScoreOrder=e,l()})}function l(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getScoreRange",async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){gb.userInfo.scoreRange=e;for(var t=2;9>=t;t++)gb.option[t]=f(t);h()})}for(var u=1;9>u;u++)gb.dom[u]=document.getElementById("chart"+u);var m=t("uid"),b=function(){var e={color:["rgba(255,255,255,0.6)"],grid:{borderWidth:0,x:15,y:60,x2:15,y2:35},tooltip:{},yAxis:[{type:"category",show:!1,data:[]}],xAxis:[{type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",color:gb.colors.whiteLight}},axisLine:{show:!1},axisTick:{show:!1},boundaryGap:0,axisLabel:{textStyle:{color:gb.colors.whiteMedium}}}],series:[{name:"得分",type:"bar",barMaxWidth:60,areaStyle:{normal:{color:gb.colors.whiteMediumLight}},lineStyle:{normal:{width:1}},data:[],itemStyle:{normal:{color:gb.colors.whiteMedium,width:1,label:{show:!1,textStyle:{fontSize:15,color:"#fff"},position:"insideRight",formatter:"{b}:{c}"},barBorderRadius:2}},animationDelay:function(e){return 200*e},animationDelayUpdate:function(e){return 200*e}}]};return e},g=function(e,t){$().counterUp&&e.counterUp({delay:10,time:t})},f=function(e){var t;return 2!=e||gb.optionRenderFlag[e-2]?3!=e||gb.optionRenderFlag[e-2]?4!=e||gb.optionRenderFlag[e-2]?5!=e||gb.optionRenderFlag[e-2]?6!=e||gb.optionRenderFlag[e-2]?7!=e||gb.optionRenderFlag[e-2]?8!=e||gb.optionRenderFlag[e-2]?9!=e||gb.optionRenderFlag[e-2]?void 0:(t=b(),t.legend={show:!0,data:["第二次","第一次"],textStyle:{color:"#fff"},x:"right",y:30},t.tooltip={trigger:"item",formatter:"{a} <br/>{b} : {c}%"},t.yAxis=[{type:"category",show:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{textStyle:{color:"rgba(255, 255, 255, 0.6)"}},data:[]}],t.grid.x=95,t.color=gb.color,t.series=[{name:"第二次",type:"bar",barMaxWidth:60,stack:"总比例",label:{normal:{show:!1}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}},{name:"第一次",type:"bar",barMaxWidth:60,stack:"总比例",label:{normal:{show:!1}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}],gb.userInfo.dptCompare.moreChancePassedCompare.map(function(e){t.yAxis[0].data.push(e.dpt),t.series[0].data.push(e["2ndPassed"]),t.series[1].data.push(e["1stPassed"])}),t.yAxis[0].data.reverse(),t.series[0].data.reverse(),t.series[1].data.reverse(),gb.optionRenderFlag[e-2]=!0,t):(t=b(),t.tooltip={trigger:"item",formatter:"{a} <br/>{b} : {c}%"},t.series=[{name:"获奖比例",type:"bar",barMaxWidth:60,label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:"{b}\n{c}%"}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}],gb.userInfo.dptCompare.prizeCompare.map(function(e){t.yAxis[0].data.push(e.dpt),t.series[0].data.push(e.dptPassRatio)}),t.yAxis[0].data.reverse(),t.series[0].data.reverse(),gb.optionRenderFlag[e-2]=!0,t):(t=b(),t.tooltip={trigger:"item",formatter:"{a} <br/>{b} :{c}分"},t.series=[{name:"平均得分",type:"bar",label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:"{b}\n{c}分"}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}],gb.userInfo.dptCompare.scoreCompare.map(function(e){t.yAxis[0].data.push(e.dpt),t.series[0].data.push(e.score)}),t.yAxis[0].data.reverse(),t.series[0].data.reverse(),gb.optionRenderFlag[e-2]=!0,t):(t={color:gb.color,tooltip:{trigger:"item",formatter:"{a} <br/>{b}分 : {c}人 ({d}%)"},legend:{show:!1,orient:"vertical",left:"left",data:[]},series:[{name:"得分分布",type:"pie",radius:"60%",center:["50%","50%"],data:[],label:{normal:{textStyle:{color:"#334"},formatter:"{b}分\n({d}%)"}},labelLine:{normal:{length:10,lineStyle:{color:"#334"}}},animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}]},gb.userInfo.dptScoreOrder.map(function(e){t.legend.data.push(e.score),t.series[0].data.push({name:e.score,value:e.nums})}),gb.optionRenderFlag[e-2]=!0,t):(t=b(),t.series=[{name:"已参与",type:"bar",barMaxWidth:60,stack:"比例",label:{normal:{show:!1,position:"insideLeft",textStyle:{fontSize:15},formatter:function(e){return e.name+"\n"+e.value.toFixed(2)+"%"}}},itemStyle:{normal:{color:function(e){return gb.color[e.dataIndex]}}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}},{name:"未参与",type:"bar",barMaxWidth:60,stack:"比例",label:{normal:{show:!0,position:"insideRight",textStyle:{fontSize:15},formatter:function(e){return e.name+"\n"+(100-e.value).toFixed(2)+"%"}}},itemStyle:{normal:{color:gb.colors.whiteMediumLight}},data:[],animationDelay:function(e){return 100*e},animationDelayUpdate:function(e){return 100*e}}],gb.userInfo.dptCompare.answerRatio.map(function(e){t.yAxis[0].data.push(e.dpt);var o=Number.parseFloat(e.answeredRatio);t.series[0].data.push(o),t.series[1].data.push(100-o)}),t.series[0].data[0]>50&&(t.series[0].label.normal.show=!0,t.series[1].label.normal.show=!1),t.yAxis[0].data.reverse(),t.series[0].data.reverse(),t.series[1].data.reverse(),gb.optionRenderFlag[e-2]=!0,t):(t=b(),t.series[0].data=[],t.yAxis[0].data=["全公司",gb.userInfo.user_dpt,gb.userInfo.user_name],t.series[0].name="答题时间",t.series[0].data=[(Number.parseInt(gb.userInfo.ltdTime)/60).toFixed(1),(Number.parseInt(gb.userInfo.dptTime)/60).toFixed(1),{value:(Number.parseInt(gb.userInfo.timeUsed)/60).toFixed(1),itemStyle:{normal:{color:"rgb(99,201,99)",label:{textStyle:{color:"#fff"}}}}}],t.series[0].itemStyle.normal.label={show:!0,textStyle:{fontSize:18,color:"#333"},position:"insideLeft",formatter:"{b}:{c}分钟"},gb.optionRenderFlag[e-2]=!0,t):(t=b(),t.series[0].data=[],t=r(gb.userInfo.dptScoreOrder,t),gb.optionRenderFlag[e-2]=!0,t):(t=b(),t.series[0].data=[],t=r(gb.userInfo.scoreRange,t),gb.optionRenderFlag[e-2]=!0,t)},h=function(){$("#fullpage").fullpage({navigation:!0,afterRender:function(t,o){for(var a=1;9>a;a++)gb.myChart[a-1]=e.init(gb.dom[a]);$(window).resize(function(){for(var e=1;9>e;e++)gb.myChart[e-1].resize()}),8==t&&"down"==o&&$(".iSlider-arrow").hide()},afterLoad:function(t,o){g($(".section:nth("+(o-1)+")").find(".number"),500),o>=2&&9>=o&&(gb.myChart[o-2]=e.init(gb.dom[o-1]),gb.myChart[o-2].setOption(gb.option[o])),10==o?$(".iSlider-arrow").hide():$(".iSlider-arrow").show()}}),$(".hidden").removeClass("hidden"),gb.loadComplete||($("#fakeLoader").hide(),gb.loadComplete=!0)};(function(){$.ajax({url:"http://cbpc540.applinzi.com/index.php?s=/addon/GoodVoice/GoodVoice/getSafeExamData&uid="+m,async:!1,dataType:"jsonp",callback:"JsonCallback"}).done(function(e){if(gb.loadBscInfo=e.status,gb.loadBscInfo){gb.userInfo=e,gb.userInfo.dptCompare={},gb.userInfo.user_dpt=gb.userInfo.user_dpt.trim(),$('[name="userName"]').text(gb.userInfo.user_name),$('[name="userOrder"]').text(Number.parseInt(gb.userInfo.id)-gb.dbSheetIdx),$('[name="userScore"]').text(gb.userInfo.score);var t=Math.floor(Number.parseInt(gb.userInfo.timeUsed)/60),a=Number.parseInt(gb.userInfo.timeUsed)%60;$('[name="userMinuteLength"]').text(t),$('[name="userSecondLength"]').text(a);var r=Number.parseInt(gb.userInfo.score)>=80?"这是一个不错的分数哟":"下次还需要继续努力呢";$('[name="scoreDesc"]').text(r),$('[name="answerTimes"]').text("1"==gb.userInfo.iTimes?"仅用了一次机会便":"用了两次机会"),o()}})})(),function(){$("#autoplay").attr("src","assets/audio/bgm2.mp3");var e=document.getElementById("autoplay"),t=document.getElementById("musicBtn"),o=document.getElementById("musicBtnTxt");document.getElementById("musicBtn").addEventListener("touchstart",function(){o.style.display="",e.paused?(e.play(),t.className="music-btn on",o.innerHTML="开始"):(e.pause(),t.className="music-btn",o.innerHTML="关闭"),setTimeout(function(){o.style.display="none"},1e3)},!1)}()});
//# sourceMappingURL=readSafeScore.min.js.map