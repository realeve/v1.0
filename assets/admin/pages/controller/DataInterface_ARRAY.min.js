function SaveSettings(){var t=$("#RefreshTime").val(),e=$("#AutoRefresh").bootstrapSwitch("state")===!0?1:0,a=$("#FixTblHead").bootstrapSwitch("state")===!0?1:0,i=$("#FixTblCol").bootstrapSwitch("state")===!0?1:0,o=$("#FootSearch").bootstrapSwitch("state")===!0?1:0,l=$("#InputToggle").bootstrapSwitch("state")===!0?1:0,n=$("#InputInner").bootstrapSwitch("state")===!0?1:0,s=getRootUrl("QualityTable")+"/SaveSettings";$.post(s,{RefreshTime:t,AutoRefresh:e,FixTblHead:a,FixTblCol:i,FootSearch:o,InputToggle:l,InputInner:n},function(t,e){if("success"==e){var a=jQuery.parseJSON(t);infoTips(a.message,1)}else infoTips("保存设置失败，请稍后重试或联系管理员!",0)})}function ReadSettings(){var t=getRootUrl("QualityTable")+"/ReadSettings";$.ajax({type:"POST",async:!1,url:t,success:function(t){var e=jQuery.parseJSON(t),a=e.data[0];$("#RefreshTime").val(a.RefreshTime),0===a.AutoRefresh&&$("#AutoRefresh").bootstrapSwitch("toggleState"),0===a.FixTblHead&&$("#FixTblHead").bootstrapSwitch("toggleState"),0===a.FixTblCol&&$("#FixTblCol").bootstrapSwitch("toggleState"),0===a.FootSearch&&$("#FootSearch").bootstrapSwitch("toggleState"),0===a.InputToggle&&$("#InputToggle").bootstrapSwitch("toggleState"),0===a.InputInner&&$("#InputInner").bootstrapSwitch("toggleState")}})}$("#HideTips").on("click",function(){$(".note.note-success").hide()}),$("#SaveSettings").on("click",function(){SaveSettings()});var dataTable=function(){function t(t){var e;return e={bRetrieve:!0,language:{url:getRootPath()+"/assets/admin/pages/controller/DataTableLanguage.min.json"},order:[[1,"asc"]],lengthMenu:[[5,10,15,20,50,100,-1],[5,10,15,20,50,100,"All"]],pageLength:15,dom:"<'row tbTools' <'col-md-6 col-sm-12 pull-right'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",buttons:[{extend:"copyHtml5",exportOptions:{columns:":visible"},text:"复制"},{extend:"excelHtml5",exportOptions:{columns:":visible"}},{extend:"csvHtml5",exportOptions:{columns:":visible"}},{extend:"pdfHtml5",orientation:t.cols>10?"landscape":"portrit",pageSize:t.cols>10?"A3":"A4",message:t.source+"\n©成都印钞有限公司 技术质量部",title:t.title,exportOptions:{columns:":visible"}},{extend:"print",autoPrint:!1,text:"打印",message:t.source+"<br>©成都印钞有限公司 技术质量部",title:t.title,exportOptions:{columns:":visible"}},{extend:"colvis",text:'隐藏数据列<i class="fa fa-angle-down"></i>',className:"btn-fit-height green-haze dropdown-toggle"}],bDeferRender:!0,bProcessing:!0,bStateSave:!0,bserverSide:!1,bInfo:!0,bAutoWidth:!0,bSortClasses:!1,aoColumns:t.header,data:t.data,bScrollInfinite:!0,searchHighlight:!0,colReorder:{realtime:!0},scroolY:"70v",scrollCollapse:!0,initComplete:function(){var e=this.api();e.$("td").click(function(){e.search(this.innerText).draw()}),$(".tools").append($(".tabletools-btn-group").clone(!0)),$(".tbTools").remove(),infoTips(JSON.stringify(t),2)}}}function e(e,a){var o=$(e),l=t(a);i=o.dataTable(l)}function a(t,a){var o=$(t);if(Data=ReadData(a),$("#TableTitle").text(Data.title),$("#datasource").text("("+Data.source+")"),!(Data.rows>0))return void infoTips("该时间范围内无质量数据，请重新选择查询时间!",1);if(!$("#sample tbody").length)return void e(t,Data);i=o.dataTable(),i.fnClearTable(this);for(var l=i.fnSettings(),n=0;n<Data.rows;n++)i.oApi._fnAddData(l,Data.data[n]);l.aiDisplay=l.aiDisplayMaster.slice(),i.fnDraw(),infoTips(JSON.stringify(Data),2)}var i;return{init:function(){$("#Preview").click(function(){var t=$("#PreviewUrl").val();a("#sample",t)})}}}(),FormEditable=function(){$.mockjaxSettings.responseTime=100;var t=function(){$.mockjax({url:"/post"}),$.mockjax({url:"/DBGroups",response:function(){this.responseText=[{value:0,text:"质量综合管理系统"},{value:1,text:"小张核查"},{value:2,text:"码后核查"},{value:3,text:"机台作业"},{value:4,text:"库管系统"}]}})},e=function(){var t=($("#InputToggle").bootstrapSwitch("state")===!0?1:0,$("#InputInner").bootstrapSwitch("state")===!0?1:0);t&&($.fn.editable.defaults.mode="inline"),$.fn.editable.defaults.inputclass="form-control",$.fn.editable.defaults.url="/post",$("#ApiName").editable({validate:function(t){return""===$.trim(t)?"该字段不能为空":void 0},url:"/post",type:"text",pk:1,name:"ApiName",title:"请输入接口名称"}),$("#Author").editable({validate:function(t){return""===$.trim(t)?"该字段不能为空":void 0}}),$("#DataBaseID").editable({name:"DBID",inputclass:"form-control",source:[{value:0,text:"质量综合管理系统"},{value:1,text:"小张核查"},{value:2,text:"码后核查"},{value:3,text:"机台作业"},{value:4,text:"库管系统"},{value:5,text:"质量控制中心"}]}),$("#CreateDate").editable({format:"yyyy-mm-dd hh:ii",viewformat:"yyyy-mm-dd hh:ii",datetimepicker:{rtl:Metronic.isRTL(),todayBtn:"linked",weekStart:1}}),$("#SQL").editable({name:"strSQL",showbuttons:"bottom",rows:8,inputclass:"form-control",tpl:'<textarea style="min-width:430px;"></textarea>',validate:function(t){return""===$.trim(t)?"该字段不能为空":void 0}}),$("#params").editable({inputclass:"form-control input-medium",select2:{tags:["tstart","tend","tstart2","tend2","tstart3","tend3","p1","p2","p3","p4","p5","p6","p7","p8","p9","p10"],tokenSeparators:[","," "]},validate:function(t){return""===$.trim(t)?"该字段不能为空":void 0},success:function(t,e){if(""!==$.trim(e)){for(var a=$("#url").text(),i=0,o="";i<e.length;i++){var l=i+1;o+="&"+e[i]+"=参数"+l}return a+=o,$("#PreviewUrl").val($.trim(a)),e}}}),$("#note").editable({showbuttons:Metronic.isRTL()?"left":"right",name:"ApiDesc"}),$("#pencil").on("click",function(t){t.stopPropagation(),t.preventDefault(),$("#note").editable("toggle")}),$("#url").editable({name:"URL",disabled:!0}),$("#ApiID").editable({disabled:!0})};return{init:function(){t(),e(),$("#edit").on("click",function(){$("#user .editable").editable("toggleDisabled"),$("#url").editable("disable"),$("#ApiID").editable("disable")}),$("#InputInner").on("switchChange.bootstrapSwitch",function(){SaveSettings(),window.location.reload()}),$("#user .editable").on("hidden",function(t,e){if("save"===e||"nochange"===e){var a=$(this).closest("tr").next().find(".editable");InputToggle?setTimeout(function(){a.editable("show")},300):a.focus()}}),$("#SaveAPI").on("click",function(){var t=getRootUrl("DataInterface")+"SaveAPI",e=$("#user .editable").editable("getValue");return""===e.ApiName||""===e.SQL||""===e.params?void infoTips("接口名、查询语句以及接口参数不允许为空,请检查后重新提交",1):void $.post(t,e,function(t){var a=jQuery.parseJSON(t);if(infoTips(a.message,1),a.status){$("#Reset").click(),$("#ApiID").editable("setValue",a.NewID);var i="&ID="+e.ApiID,o=parseInt(e.ApiID,10)+1,l="&ID="+o,n=e.URL.replace(i,l);$("#url").editable("setValue",n),$("#DemoUrl").text(n),$("#DemoUrl").attr("href",n)}})}),$("#Reset").on("click",function(){$("#ApiName").editable("setValue",null).editable("option","pk",null).removeClass("editable-unsaved"),$("#DataBaseID").editable("setValue",null).editable("option","pk",null).removeClass("editable-unsaved"),$("#SQL").editable("setValue",null).editable("option","pk",null).removeClass("editable-unsaved");var t='[功能说明]<p style="text-indent:2em;">本接口主要用于 <i>XX</i> 信息的查询.</p>[主要参数]';t+="<ul><li>TimeStart:开始时间；</li><li> TimeEnd:开始时间；</li><li> Cols:1/0,默认为空，设为1时返回查询语句的列用于表格初始化等操作；</li></ul>",$("#note").editable("setValue",t).editable("option","pk",null).removeClass("editable-unsaved")})}}}();
//# sourceMappingURL=DataInterface_ARRAY.min.js.map