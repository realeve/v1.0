var Login=function(){var e=function(){function e(){if($(".login-form").validate().form()){var e=getRootPath(1)+"/welcome/trylogin",r={username:$('.login-form input[name="username"]').val(),password:$('.login-form input[name="password"]').val()};$.post(e,r,function(e,r){if("success"==r){var o=jQuery.parseJSON(e);if(2===o.type||3===o.type||4===o.type||7===o.type)o.type=0;else if(5===o.type||1===o.type)o.type=1;else if(6===o.type)o.type=2;else{if(9===o.type)return void(window.location.href=getRootPath(1)+"/welcome");o.type=3}infoTips(o.message,o.type,"#bootstrap_alerts_demo")}else infoTips("登录验证失败，请稍后重试或联系管理员!",0,"#bootstrap_alerts_demo")})}return!1}$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{username:{required:!0},password:{required:!0},remember:{required:!1}},messages:{username:{required:"用户名不能为空."},password:{required:"密码不能为空."}},invalidHandler:function(){$(".alert-danger",$(".login-form")).show()},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter("tnc"==r.attr("name")?$("#forget-password"):1===r.closest(".input-icon").size()?r.closest(".input-icon"):r)},submitHandler:function(){}}),$(".login-form input").keypress(function(r){13==r.which&&e()}),$(".login-form button").on("click",function(){e()})},r=function(){function e(){if($(".forget-form").validate().form()){var e=getRootPath(1)+"/welcome/resetpassword",r={email:$('.forget-form input[name="email"]').val(),username:$('.forget-form input[name="username"]').val(),password:$('.forget-form input[name="password"]').val()};$.post(e,r,function(e,r){if("success"==r){var o=jQuery.parseJSON(e);o.type=2===o.type||3===o.type||4===o.type||7===o.type?0:5===o.type?1:6===o.type?2:3,infoTips(o.message,o.type,"#bootstrap_alerts_demo3")}else infoTips("登录验证失败，请稍后重试或联系管理员!",0,"#bootstrap_alerts_demo3")})}return!1}$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{username:{required:!0},password:{required:!0},email:{required:!0,email:!0}},messages:{email:{required:"Email是您重置密码的唯一凭证."}},invalidHandler:function(){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter("tnc"==r.attr("name")?$("#register_tnc_error"):1===r.closest(".input-icon").size()?r.closest(".input-icon"):r)},submitHandler:function(){}}),$(".forget-form input").keypress(function(e){return 13==e.which?($(".forget-form").validate().form()&&$(".forget-form").submit(),!1):void 0}),$(".forget-form button").on("click",function(){e()}),jQuery("#forget-password").click(function(){jQuery(".login-form").hide(),jQuery(".forget-form").show()}),jQuery("#back-btn").click(function(){jQuery(".login-form").show(),jQuery(".forget-form").hide()})},o=function(){function e(){if($(".register-form").validate().form()){var e=getRootPath(1)+"/welcome/register",r={fullname:$(".register-form input:nth(0)").val(),email:$(".register-form input:nth(1)").val(),phone:$(".register-form input:nth(2)").val(),username:$(".register-form input:nth(3)").val(),password:$(".register-form input:nth(4)").val(),department:$(".register-form select").val()};$.post(e,r,function(e,r){if("success"==r){var o=jQuery.parseJSON(e);o.type=2===o.type||3===o.type||4===o.type||7===o.type?0:5===o.type?1:6===o.type?2:3,infoTips(o.message,o.type,"#bootstrap_alerts_demo2")}else infoTips("登录验证失败，请稍后重试或联系管理员!",0,"#bootstrap_alerts_demo2")})}return!1}$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{fullname:{required:!0},email:{required:!0,email:!0},phone:{required:!0},role:{required:!0},username:{required:!0},password:{required:!0},rpassword:{equalTo:"#register_password"}},invalidHandler:function(){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter("tnc"==r.attr("name")?$("#register_tnc_error"):1===r.closest(".input-icon").size()?r.closest(".input-icon"):r)},submitHandler:function(){}}),$(".register-form input").keypress(function(r){13==r.which&&e()}),$(".register-form button").on("click",function(){e()}),jQuery("#register-btn").click(function(){jQuery(".login-form").hide(),jQuery(".register-form").show()}),jQuery("#register-back-btn").click(function(){jQuery(".login-form").show(),jQuery(".register-form").hide()})};return{init:function(){e(),r(),o()}}}();
//# sourceMappingURL=login.min.js.map