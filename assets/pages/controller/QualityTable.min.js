function SaveSettings(){var t=$("#RefreshTime").val(),e=$("#AutoRefresh").bootstrapSwitch("state")===!0?1:0,a=$("#FixTblHead").bootstrapSwitch("state")===!0?1:0,o=$("#FixTblCol").bootstrapSwitch("state")===!0?1:0,i=$("#FootSearch").bootstrapSwitch("state")===!0?1:0,n=$("#InputToggle").bootstrapSwitch("state")===!0?1:0,s=$("#InputInner").bootstrapSwitch("state")===!0?1:0,r=getRootUrl("QualityTable")+"/SaveSettings";$.post(r,{RefreshTime:t,AutoRefresh:e,FixTblHead:a,FixTblCol:o,FootSearch:i,InputToggle:n,InputInner:s},function(t,e){if("success"==e){var a=jQuery.parseJSON(t);infoTips(a.message,1)}else infoTips("保存设置失败，请稍后重试或联系管理员!",0)})}function ReadSettings(){var t=getRootUrl("QualityTable")+"/ReadSettings";$.ajax({type:"POST",async:!1,url:t,success:function(t){var e=jQuery.parseJSON(t),a=e.data[0];$("#RefreshTime").val(a.RefreshTime),0===a.AutoRefresh&&$("#AutoRefresh").bootstrapSwitch("toggleState"),0===a.FixTblHead&&$("#FixTblHead").bootstrapSwitch("toggleState"),0===a.FixTblCol&&$("#FixTblCol").bootstrapSwitch("toggleState"),0===a.FootSearch&&$("#FootSearch").bootstrapSwitch("toggleState")}})}function GetJsonUrl(){var t=$("#dashboard-report-range span").html(),e=t.split(" ~ ")[0],a=t.split(" ~ ")[1],o=getRootPath()+"/DataInterface/Api?Author=0cf7187bf9fa92a76e26aaa380aa532b72247fd5&ID=16&M=3&tstart="+e+"&tend="+a+"&tstart2="+e+"&tend2="+a+"&t="+Math.random();return o}$("#HideTips").on("click",function(){$(".note.note-success").addClass("hide")}),$("#SaveSettings").on("click",function(){SaveSettings()});var dataTable=function(){function t(){o("#sample",GetJsonUrl())}function e(t){var e;return e={bRetrieve:!0,language:{url:getRootPath()+"/assets/admin/pages/controller/DataTableLanguage.min.json"},order:[[1,"asc"]],lengthMenu:[[5,10,15,20,50,100,-1],[5,10,15,20,50,100,"All"]],pageLength:15,dom:"<'row tbTools' <'col-md-6 col-sm-12 pull-right'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",buttons:[{extend:"copyHtml5",exportOptions:{columns:":visible"},text:"复制"},{extend:"excelHtml5",exportOptions:{columns:":visible"}},{extend:"csvHtml5",exportOptions:{columns:":visible"}},{extend:"pdfHtml5",orientation:t.cols>10?"landscape":"portrit",pageSize:t.cols>10?"A3":"A4",message:t.source+"\n©成都印钞有限公司 技术质量部",title:t.title,exportOptions:{columns:":visible"}},{extend:"print",autoPrint:!1,text:"打印",message:t.source+"<br>©成都印钞有限公司 技术质量部",title:t.title,exportOptions:{columns:":visible"}},{extend:"colvis",text:'隐藏数据列<i class="fa fa-angle-down"></i>',className:"btn-fit-height green-haze dropdown-toggle"}],bDeferRender:!0,bProcessing:!0,bStateSave:!0,bserverSide:!1,bInfo:!0,bAutoWidth:!0,bSortClasses:!1,bScrollInfinite:!0,aoColumns:t.header,data:t.data,searchHighlight:!0,colReorder:{realtime:!0},scroolY:"70v",scrollCollapse:!0,initComplete:function(){var e=this.api();e.$("td").click(function(){e.search(this.innerText).draw()}),$(".tools").append($(".tabletools-btn-group").clone(!0)),$(".tbTools").remove(),infoTips(JSON.stringify(t),2)}}}function a(t,a){var o=$(t),n=e(a);i=o.dataTable(n)}function o(t,e){var o=$(t);if(Data=ReadData(e),$("#TableTitle").text(Data.title),$("#datasource").text("("+Data.source+")"),Data.cols<2)return void infoTips("请确保数据列在2列以上，当前为："+Data.cols);if(!(Data.rows>0))return void infoTips("该时间范围内无质量数据，请重新选择查询时间!",1);if(!$("#sample tbody").length)return void a(t,Data);i=o.dataTable(),i.fnClearTable(this);for(var n=i.fnSettings(),s=0;s<Data.rows;s++)i.oApi._fnAddData(n,Data.data[s]);n.aiDisplay=n.aiDisplayMaster.slice(),i.fnDraw(),infoTips(JSON.stringify(Data),2)}var i;return{init:function(){$("button.applyBtn").live("click",function(){t()}),$("#Preview").on("click",function(){var t=$("#PreviewUrl").val();o("#sample",t)})}}}();jQuery(document).ready(function(){UIIdleTimeout.init(),initDashboardDaterange("YYYYMMDD"),initDom(),ReadSettings(),dataTable.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=QualityTable.min.js.map