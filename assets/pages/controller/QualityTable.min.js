function SaveSettings(){var e=$("#RefreshTime").val(),t=$("#AutoRefresh").bootstrapSwitch("state")===!0?1:0,a=$("#FixTblHead").bootstrapSwitch("state")===!0?1:0,o=$("#FixTblCol").bootstrapSwitch("state")===!0?1:0,i=$("#FootSearch").bootstrapSwitch("state")===!0?1:0,n=$("#InputToggle").bootstrapSwitch("state")===!0?1:0,s=$("#InputInner").bootstrapSwitch("state")===!0?1:0,r=getRootUrl("QualityTable")+"/SaveSettings";$.post(r,{RefreshTime:e,AutoRefresh:t,FixTblHead:a,FixTblCol:o,FootSearch:i,InputToggle:n,InputInner:s},function(e,t){if("success"==t){var a=jQuery.parseJSON(e);infoTips(a.message,1)}else infoTips("保存设置失败，请稍后重试或联系管理员!",0)})}function ReadSettings(){var e=getRootUrl("QualityTable")+"/ReadSettings";$.ajax({type:"POST",async:!1,url:e,success:function(e){var t=jQuery.parseJSON(e),a=t.data[0];$("#RefreshTime").val(a.RefreshTime),0===a.AutoRefresh&&$("#AutoRefresh").bootstrapSwitch("toggleState"),0===a.FixTblHead&&$("#FixTblHead").bootstrapSwitch("toggleState"),0===a.FixTblCol&&$("#FixTblCol").bootstrapSwitch("toggleState"),0===a.FootSearch&&$("#FootSearch").bootstrapSwitch("toggleState")}})}function GetJsonUrl(){var e=$("#dashboard-report-range span").html(),t=e.split(" ~ ")[0],a=e.split(" ~ ")[1],o=getRootPath()+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=16&M=3&tstart="+t+"&tend="+a+"&tstart2="+t+"&tend2="+a+"&t="+Math.random();return o}$("#HideTips").on("click",function(){$(this).parent().hide()}),$("#SaveSettings").on("click",function(){SaveSettings()});var dataTable=function(){function e(){var e;1==App.getURLParameter("debug")?($("#Preview").show(),e=$("#Preview input").val()):e=GetJsonUrl(),o("#sample",e)}function t(e){var t;return t={bRetrieve:!0,language:{url:getRootPath()+"/assets/pages/controller/DataTableLanguage.min.json"},order:[[1,"asc"]],lengthMenu:[[5,10,15,20,50,100,-1],[5,10,15,20,50,100,"All"]],pageLength:15,dom:"<'row tbTools' <'col-md-6 col-sm-12 pull-right'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>>t<'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",buttons:[{extend:"copyHtml5",exportOptions:{columns:":visible"},text:"复制",className:"btn red btn-outline"},{extend:"excelHtml5",className:"btn yellow btn-outline ",exportOptions:{columns:":visible"}},{extend:"csvHtml5",className:"btn purple btn-outline ",exportOptions:{columns:":visible"}},{extend:"pdfHtml5",orientation:e.cols>10?"landscape":"portrit",pageSize:e.cols>10?"A3":"A4",message:e.source+"\n©成都印钞有限公司 技术质量部",download:"open",title:e.title,exportOptions:{columns:":visible"},className:"btn dark btn-outline"},{extend:"print",autoPrint:!1,text:"打印",message:e.source+"<br>©成都印钞有限公司 技术质量部",title:e.title,exportOptions:{columns:":visible"},className:"btn green btn-outline"},{extend:"colvis",text:'隐藏数据列<i class="fa fa-angle-down"></i>',className:"btn green-haze btn-outline"}],bDeferRender:!0,bProcessing:!0,bStateSave:!0,bserverSide:!1,bInfo:!0,bAutoWidth:!0,bSortClasses:!1,bScrollInfinite:!0,aoColumns:e.header,data:e.data,searchHighlight:!0,colReorder:{realtime:!0},fixedHeader:{header:!0,footer:!0,headerOffset:e.fixedHeaderOffset},scroolY:"70v",scrollCollapse:!0,initComplete:function(){var e=this.api();e.$(document).on("click","td",function(){e.search(this.innerText).draw()}),$(".tools").append($(".tabletools-btn-group").clone(!0)),$(".tbTools").remove()}}}function a(e,a){var o=$(e),n=0;App.getViewPort().width<App.getResponsiveBreakpoint("md")?$(".page-header").hasClass("page-header-fixed-mobile")&&(n=$(".page-header").outerHeight(!0)):$(".page-header").hasClass("navbar-fixed-top")&&(n=$(".page-header").outerHeight(!0)),a.fixedHeaderOffset=n;var s=t(a);i=o.dataTable(s)}function o(e,t){var o=$(e);if(Data=ReadData(t),$("#TableTitle").text(Data.title),$("#datasource").text("("+Data.source+")"),Data.cols<2)return void infoTips("请确保数据列在2列以上，当前为："+Data.cols);if(!(Data.rows>0))return void infoTips("该时间范围内无质量数据，请重新选择查询时间!",1);if(!$("#sample tbody").length)return void a(e,Data);i=o.dataTable(),i.fnClearTable(this);for(var n=i.fnSettings(),s=0;s<Data.rows;s++)i.oApi._fnAddData(n,Data.data[s]);n.aiDisplay=n.aiDisplayMaster.slice(),i.fnDraw(),infoTips(JSON.stringify(Data),2)}var i;return{init:function(){$(document).on("click",".ranges li:not(:last),button.applyBtn",function(){e()}),$("#Preview a").on("click",function(){o("#sample",$("#Preview input").val())}),1==App.getURLParameter("debug")?$("#Preview").show():$("#Preview").hide()}}}();jQuery(document).ready(function(){RoundedTheme(0),UIIdleTimeout.init(),initDashboardDaterange("YYYYMMDD"),initDom(),ReadSettings(),dataTable.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=QualityTable.min.js.map