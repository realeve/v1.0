var Index=function(){function t(t,a,e,i){$('<div id="tooltip" class="chart-tooltip">'+i+"</div>").css({position:"absolute",display:"none",top:a-40,left:t-40,border:"0px solid #ccc",padding:"2px 6px","background-color":"#fff",background:"#fff"}).appendTo("body").fadeIn(200)}function a(a,e,i,o,n){if(o=o||0,$("#x").text(a.x.toFixed(o)),$("#y").text(a.y.toFixed(o)),e){if(l!=e.dataIndex){l=e.dataIndex,previousSeries=e.seriesIndex-1,$("#tooltip").remove();var s,r=(e.datapoint[0].toFixed(o),e.datapoint[1].toFixed(o),e.series.data[e.datapoint[0]][0]),c=0;"undefined"==typeof n?s=r+" : "+e.datapoint[1].toFixed(o)+" "+i:(s='<span class="caption-subject">'+r+"</span><br>"+n[previousSeries].label.trim()+" : "+e.datapoint[1].toFixed(0)+" "+i,c=22),t(e.pageX+10,e.pageY-c,e.datapoint[0],s)}}else $("#tooltip").remove(),l=null}var e=function(){$(".theme-panel").hide(),hideSidebarTool()},i=function(t,a){$().counterUp&&t.counterUp({delay:10,time:a})},o=(function(){var t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=168&M=3",a=ReadData(t);a.data[0].map(function(t,a){$(".dashboard-stat .number:nth("+a+")").attr("data-value",data2ThousandSeparator(t)).text(data2ThousandSeparator(t))}),a.data[0][4]&&bsTips("近期有机检异常产品，请注意!"),i($(".top-info .number"),800)}(),function(){function t(t){var e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID="+t+"&M=3",i=ReadData(e),o="";return i.data.map(function(t){var e=t[0];o+='\n<div class="col-md-2 col-sm-2 col-xs-6"><div class="'+a[e]+' font-sm">'+e+"</div>",o+='			<div class="uppercase font-hg '+a[e]+'"><span class="number" data-counter="counterup" data-value='+t[1]+">"+t[1],o+='</span><span class="font-lg font-grey-mint">%</span>',o+="			</div></div>"}),0==i.rows&&(o='<h3 style="padding-left:20px;height:20px;">对应时间无质量信息</h3>'),o}var a={"9602A":"font-green-jungle","103-G-2A":"font-green-jungle","9603A":"font-purple","103-G-3A":"font-purple","9604A":"font-blue","103-G-4A":"font-blue","9606A":"font-green-seagreen","103-G-6A":"font-green-seagreen","9607T":"font-red-flamingo","103-G-7T":"font-red-flamingo"};$('[name="hisQuality"] label').on("click",function(){$('[name="hisQuality"] .list-separated').html(e[$(this).data("id")]),i($('[name="hisQuality"] .number'),300)});for(var e=[],o=0;3>o;o++)e[o]=t(o+169);(function(){$('[name="hisQuality"] .list-separated').html(e[0]),i($('[name="hisQuality"] .number'),300)})(),function(){var t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=172&M=0",a=ReadData(t),e={element:"passed_a_year_quality_static",padding:0,behaveLikeLine:!1,gridEnabled:!1,gridLineColor:!1,axes:!1,fillOpacity:1,ymin:70,data:a.data,lineColors:["#399a8c"],xkey:a.header[0].title,ykeys:[a.header[1].title],labels:[a.header[1].title],pointSize:0,lineWidth:0,hideHover:"auto",resize:!0};Morris.EventEmitter&&(r=Morris.Area(e))}()}),n=function(){return{initDashboardWidget:function(){$('.task-list input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).parents("li").addClass("task-done"):$(this).parents("li").removeClass("task-done")}),$(".task-list").on("click",".complete,.task-checkbox,.liChild,.task-title",function(){var t=$(this).parent().find(".liChild"),a=$(this).parents("li");t.val();t.parent().hasClass("checked")?(a.removeClass("task-done"),t.parent().removeClass("checked"),bsTips("任务标记为未完成，请在后台更新数据",2)):(a.addClass("task-done"),t.parent().addClass("checked"),bsTips("任务标记为已完成，请在后台更新数据",2))}),$(".task-list").on("click",".del",function(){$(this).parents("li").remove();bsTips("任务成功删除，请在后台更新数据",2)})}}}(),l=null,s=function(){var t,e=function(){var a=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=173&M=3",e=ReadData(a);t={hardDisk:[],sqlSvr:[],data_uploads:[],realQuality:[]},e.data.map(function(a){t.hardDisk.push([a[0],a[2]]),t.sqlSvr.push([a[0],Number.parseFloat(a[3].replace("MB",""))/1e3]),t.data_uploads.push([a[0],a[4]]),5!=a[5]&&t.realQuality.push([a[0],a[1]])})};(function(){function i(){return e(),t.realQuality}function o(t,a){a=a||0;var e=a?"#f89f9f":"#893a7c";return[{data:t,lines:{fill:.9,lineWidth:0},color:[e]},{data:t,yaxis:1,points:{show:!0,fill:!0,radius:5,fillColor:e,lineWidth:3},color:"#fff",shadowSize:0}]}$("#real_quality_loading").hide(),$("#real_quality_content").show();var n,l=0,s=i(),r=function(t){var a=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=174&M=3&machine="+t,e=ReadData(a);return o(e.data,1)},c={xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:0,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"},show:!1},yaxis:{ticks:5,tickDecimals:0,tickColor:"#eee",max:100,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},grid:{hoverable:!0,clickable:!0,tickColor:"#eee",borderColor:"#eee",borderWidth:1},legend:{show:!1}};$("#real_quality_statistics").bind("plothover",function(t,e,i){a(e,i,"%",2)}),$("#real_quality_statistics").bind("plotclick",function(t,a,e){var i;l?(i=n[0].data[e.dataIndex][0],bsTips("车号追溯功能加入后跳转至"+i+"详细信息",2)):(i=s[e.dataIndex][0],$('[name="curQuality_title"]').text(i),n=r(i),$.plot($("#real_quality_statistics"),n,c),l++)}),$('[name="curQuality"]').on("click",function(){$.plot($("#real_quality_statistics"),o(s),c),$('[name="curQuality_title"]').text("实时质量"),l=0}),$('[name="curQuality"]').click()})(),function(){function e(t,a){return[{data:a,yaxis:1,lines:{fill:.6,lineWidth:0},color:["#f89f9f"],label:"&nbsp;数据库大小&nbsp;"},{data:a,yaxis:1,points:{show:!0,fill:!0,radius:5,fillColor:"#f89f9f",lineWidth:3},color:"#fff",shadowSize:0},{data:t,yaxis:2,lines:{fill:.6,lineWidth:0},color:["#92e9dc"],label:"&nbsp;硬盘可用量&nbsp;"},{data:t,yaxis:2,points:{show:!0,fill:!0,radius:5,fillColor:"#92e9dc",lineWidth:3},color:"#fff",shadowSize:0}]}function i(t){return[{data:t,lines:{fill:.3,lineWidth:0},color:["#BAD9F5"]},{data:t,points:{show:!0,fill:!0,radius:4,fillColor:"#9ACAE6",lineWidth:2},color:"#9ACAE6",shadowSize:1,label:"数据上传"},{data:t,lines:{show:!0,fill:!1,lineWidth:3},color:"#9ACAE6",shadowSize:0}]}if(jQuery.plot){var o=e(t.hardDisk,t.sqlSvr),n=i(t.data_uploads);if(0!==$("#site_statistics").size()){$("#site_statistics_loading").hide(),$("#site_statistics_content").show();$.plot($("#site_statistics"),o,{xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:0,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"},show:!1},yaxes:[{ticks:5,tickDecimals:0,tickColor:"#eee",min:0,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},{ticks:5,tickDecimals:0,tickColor:"#eee",position:"right",font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}}],grid:{hoverable:!0,clickable:!0,tickColor:"#eee",borderColor:"#eee",borderWidth:1},legend:{show:!0,noColumns:!1,container:"#site_statistics_legend"}});$("#site_statistics").bind("plothover",function(t,e,i){a(e,i,"GB",0,o)})}if(0!==$("#data_upload").size()){$("#data_upload_loading").hide(),$("#data_upload_content").show();$.plot($("#data_upload"),n,{xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:0,font:{lineHeight:18,style:"normal",variant:"small-caps",color:"#6F7B8A"},show:!1},yaxis:{ticks:5,tickDecimals:0,tickColor:"#eee",font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"},max:20},grid:{hoverable:!0,clickable:!0,tickColor:"#eee",borderColor:"#eee",borderWidth:1},legend:{show:!1,noColumns:!1,container:"#data_upload_legend"}});$("#data_upload").bind("plothover",function(t,e,i){a(e,i,"车")}),$("#data_upload").bind("mouseleave",function(){$("#tooltip").remove()})}}}()},r=null;redrawCharts=function(){r.resizeHandler()},initMiniCharts=function(){App.isIE8()&&!Function.prototype.bind&&(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var a=Array.prototype.slice.call(arguments,1),e=this,i=function(){},o=function(){return e.apply(this instanceof i&&t?this:t,a.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}),$("#sparkline_bar").sparkline([8,9,10,11,10,10,12,10,10,11,9,12,11],{type:"bar",width:"100",barWidth:6,height:"45",barColor:"#F36A5B",negBarColor:"#e02222"}),$("#sparkline_bar2").sparkline([9,11,12,13,12,13,10,14,13,11,11,12,11],{type:"bar",width:"100",barWidth:6,height:"45",barColor:"#5C9BD1",negBarColor:"#e02222"})};var c=function(){var t=function(){var t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=175&M=0",a=ReadData(t),e={element:"noteAnany_static",behaveLikeLine:!1,fillOpacity:1,stacked:0,ymin:95,ymax:100,data:a.data,xkey:a.header[0].title,ykeys:[a.header[1].title,a.header[2].title,a.header[3].title],labels:[a.header[1].title,a.header[2].title,a.header[3].title],hideHover:!0,resize:!0};Morris.EventEmitter&&(r=Morris.Bar(e))},e=!1,i=function(){var t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=176&M=3",e=ReadData(t),i=[];e.data.map(function(t){i.push([t[0],t[3]])});$.plot($("#statistics_2"),[{data:i,lines:{fill:.9,lineWidth:0},color:["#556"],label:"过程质量评分"},{data:i,yaxis:1,points:{show:!0,fill:!0,radius:5,fillColor:"#556",lineWidth:3},color:"#fff",shadowSize:0}],{xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:2,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},yaxis:{ticks:4,tickDecimals:0,tickColor:"#f0f0f0",min:96,max:100,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},grid:{backgroundColor:{colors:["#fff","#fff"]},borderWidth:1,borderColor:"#f0f0f0",margin:0,minBorderMargin:0,labelMargin:20,hoverable:!0,clickable:!0,mouseActiveRadius:6},legend:{show:!0}});$("#statistics_2").bind("plothover",function(t,e,i){a(e,i,"分",2)})};return{init:function(){t(),$("#process_quality_cut_tab").on("shown.bs.tab",function(t){e||(i(),e=!1)}),$("#process_quality_offline_tab").on("shown.bs.tab",function(t){bsTips("即将添加")})}}}();return{init:function(){e(),o(),s(),c.init(),n.initDashboardWidget(),initMiniCharts(),bsTips("本页功能尚未添加",1)}}}();jQuery(document).ready(function(){UIIdleTimeout.init(),initDom(),Index.init()}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=index.min.js.map