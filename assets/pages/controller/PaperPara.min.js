var PaperParam=function(){function e(){var e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=24&M=3&t=1",t=ReadData(e);InitSelect("Prod_id",t),e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=23&M=3&t=1",t=ReadData(e),InitSelect("machine_id",t),e=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=25&M=3&t=1",t=ReadData(e),InitSelect("oper_id",t),$("input[name='rec_date']").val(today(6)),$("input[name='Reel_Code']").maxlength({limitReachedClass:"label label-danger",threshold:3}),initSelect2()}function t(){var e=(new Date).getHours();e>=0&&8>e?SetiCheckChecked("class_id",2):e>=8&&16>e?SetiCheckChecked("class_id",0):SetiCheckChecked("class_id",1)}function a(){return""===$('select[name="oper_id"]').val()||""===$('select[name="prod_ID"]').val()||""===$('select[name="machine_ID"]').val()?($(".portlet.light").hide(),1):($(".portlet.light").show(),0)}function o(){var e=$('input[name="Reel_Code"]').val(),t=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=33&M=2&r="+e,a=ReadData(t);a.header.map(function(e){var t=e.title;$('form .form-control[name="'+t+'"]').val(a.data[0][t])}),SetSelect2Val("oper_id",a.data[0].oper_id),SetSelect2Val("Prod_id",a.data[0].Prod_id),SetSelect2Val("machine_id",a.data[0].machine_id),SetiCheckChecked("class_id",a.data[0].class_id),$('.portlet button[type="submit"]').attr("data-sn",a.data[0].ID),$('.portlet button[type="submit"]').html($('.portlet button[type="submit"]').html().replace("提交","更新")),$(".portlet.light").show(),i(),$(".amounts h4").html("<strong>评价总分:</strong> "+a.data[0].score),$("#checkbox2").iCheck("uncheck"),$(".normalPara input").attr("disabled","true"),$(".normalParaEdit").show()}function i(){var e=$("input[name='rec_date']").val();e=e.substr(0,4)+e.substr(5,2);var t=$('select[name="Prod_id"]').val(),a=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=27&M=3&tmonth="+e+"&prod="+t,o=ReadData(a);a=getRootPath(1)+"/DataInterface/Api?Token=79d84495ca776ccb523114a2120e273ca80b315b&ID=28&M=3&tmonth="+e+"&prod="+t;var i=ReadData(a);$(".grey-cascade").html("物理指标得分："+xround(o.data[0][0],2)+"，外观指标得分："+xround(i.data[0][0],2))}function r(){var e=getRootPath(1)+"/assets/pages/controller/data/paper_physic.json";$.get(e,function(e){c=e})}var n=function(){jQuery().datepicker&&$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0,format:"yyyy-mm-dd"})};$('select[name="oper_id"]').change(function(){a()||i()}),$('select[name="machine_id"]').change(function(){a()||i(),t()}),$('select[name="Prod_id"]').change(function(){return a()?void $(".grey-cascade").html(""):void i()}),$('input[name="Reel_Code"]').on("change",function(){o()});var c={};$(".portlet.light input").on("change",function(){var e=parseFloat($(".amounts h4").text().replace("评价总分:",""),10),t=$(this).attr("name"),a=$(this).val();"undefined"!=typeof c[t]&&(a<c[t].min||a>c[t].max)&&(e-=c[t].score),$(".amounts h4").html("<strong>评价总分:</strong> "+e)});var l=function(){function e(){var e=getRootPath()+"/DataInterface/insert",t=getFormData("theForm");t.tbl=0,t.class_id=GetRadioChecked("class_id"),t.score=$(".amounts h4").text().replace("评价总分:",""),t.utf2gbk=["remark"],t.record_Time=today(1),t.class_id=GetiCheckChecked("class_id"),$.post(e,t,function(e,t){if("success"==t){var a=$.parseJSON(e);infoTips(a.message,a.type),$('button[type="reset"]').click(),$(".portlet.light").hide()}else infoTips("保存设置失败，请稍后重试或联系管理员!",0),infoTips(JSON.stringify(e))})}function a(){var e=getRootPath()+"/DataInterface/update",t=getFormData("theForm");t.tbl=0,t.class_id=GetRadioChecked("class_id"),t.score=$(".amounts h4").text().replace("评价总分:",""),t.utf2gbk=["remark"],t.record_Time=today(1),t.class_id=GetiCheckChecked("class_id"),t.id=$('.portlet button[type="submit"]').attr("data-sn"),$.post(e,t,function(e,t){if("success"==t){var a=$.parseJSON(e);infoTips(a.message,a.type),$('button[type="reset"]').click(),$(".portlet.light").hide(),$(".normalPara input").removeAttr("disabled"),$('.portlet button[type="submit"]').html($('.portlet button[type="submit"]').html().replace("更新","提交"))}else infoTips("保存设置失败，请稍后重试或联系管理员!",0),infoTips(JSON.stringify(e))})}var o=getValidateRule("theForm");o.Reel_Code={minlength:4,maxlength:6,number:!1,required:!0},o.rec_date.number=!1,o.water_imbibition={required:!1},o.PH_val={required:!1},o.sur_Strength={required:!1},o.sur_oil_imbibition={required:!1},$("form[name=theForm]").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:o,messages:{Reel_Code:{required:"轴号不能为空."}},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},submitHandler:function(){}}),$('button[type="submit"]').on("click",function(){$("form[name=theForm]").validate().form()?"提交"==$('.portlet button[type="submit"]').text().trim()?e():a():infoTips("请确保所有必要信息均正确输入")}),$('button[type="reset"]').on("click",function(){t(),$(".amounts h4").html("<strong>评价总分:</strong> 100"),$('.portlet button[type="submit"]').html($('.portlet button[type="submit"]').html().replace("更新","提交")),$("#checkbox2").iCheck("check"),$(".normalPara input").removeAttr("disabled"),SetSelect2Val("oper_id",-1),SetSelect2Val("Prod_id",-1),SetSelect2Val("machine_id",-1),$(".portlet.light").hide()}),$("#checkbox2").on("ifChecked",function(){var e=$(this).prop("checked")?1:0;e?$(".normalPara input").removeAttr("disabled"):$(".normalPara input").attr("disabled","true")})};return{init:function(){$(".portlet.light").hide(),$(".normalParaEdit").hide(),n(),e(),t(),l(),r()}}}();jQuery(document).ready(function(){initDom(),iChechBoxInit(),$("#checkbox2").iCheck("check"),PaperParam.init(),RoundedTheme(0)}),jQuery(window).resize(function(){HeadFix()});
//# sourceMappingURL=PaperPara.min.js.map